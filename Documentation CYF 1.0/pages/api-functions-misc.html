<!DOCTYPE html>
<!--
since you're here anyway: there's a small easter egg on the text commands page but it's probably not worth finding, sorry
you may notice this page's code is garbage: i'm not a web designer! ;-;
it's w3c valid, at least
-->

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../img/icon.png">

    <title>CYF Documentation - The Misc Object</title>
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="../css/themesidebar.css" rel="stylesheet">
    <link href="../css/shThemeRDark.css" rel="stylesheet">

    <!-- Syntax highlighting -->
    <script type="text/javascript" src="../js/shCore.js"></script>
    <script type="text/javascript" src="../js/shBrushLua.js"></script>
    <script type="text/javascript">SyntaxHighlighter.all();</script>
</head>
<body>
<img src="../img/bg2.png" alt="Undertale background" class="backimg">
<div class="container arena black">
    <!--navigation-->
    <script type="text/javascript" src="../js/SideBar.js"></script>
    <script type="text/javascript"> CreateSideBar("The Misc Object"); </script>

    <!--tabs'n'shit-->
    <div class="tab-content col-md-10">
        <div class="tab-pane active text-style" id="api-functions-misc">
            <p>
                <br><span class="function"><span class="CYF"></span> The Misc object [E/M/W]</span>
                The Misc object has some window-related and computer-related functions. Most of them are functions.
            </p>
            <ul>
                <li><span class="string"></span> <span class="term">Misc.MachineName</span> (read-only) - Returns the name of the player's session.</li><br>
                <li><span class="string"></span> <span class="term">Misc.OSType</span> - Returns <span class="term">Windows</span>, <span class="term">Mac</span> or <span class="term">Linux</span>.</li><br>
                <li><span class="userdata">shader</span> <span class="term">Misc.ScreenShader</span> - A shader object that affects the entire screen, instead of a single sprite.<br>
                See <span class="ref">The Shader Object</span> for more information.</li><br>
                <li>
                    <span class="term">Misc.ShakeScreen(<span class="number"></span> durationInFrames, <span class="number"></span> intensity = 3, <span class="boolean"></span> isIntensityDecreasing = true)</span>
                    - Shakes the screen for <span class="term">durationInFrames</span> frames, with a maximum of
                    <span class="term">intensity</span> pixels away from the normal position.<br>
                    Set <span class="term">isIntensityDecreasing</span> as true to reduce the intensity over time.
                </li><br>
                <li><span class="term">Misc.StopShake()</span> - Stops a previous <span class="term">Misc.ShakeScreen</span> call, does nothing
                otherwise.</li><br>
                <li><span class="term">Misc.MoveCamera(<span class="number"></span> x, <span class="number"></span> y)</span> - Moves the camera right <span class="term">x</span> pixels and up <span class="term">y</span> pixels.</li><br>
                <li><span class="term">Misc.MoveCameraTo(<span class="number"></span> x, <span class="number"></span> y)</span> - Moves the bottom-left of the camera directly to the point (<span class="term">x</span>, <span class="term">y</span>).<br>
                <span class="term">(0, 0)</span> is the starting position.</li><br>
                <li><span class="term">Misc.ResetCamera()</span> - Resets the position of the camera. Same as calling <span class="term">MoveCameraTo(0, 0)</span> in battle - in the Overworld, this instead resets the camera to the Player's position.</li><br>
                <li><span class="number"></span> <span class="term">Misc.cameraX</span> - Gets or sets the current x position of the bottom-left corner of the camera.</li><br>
                <li><span class="number"></span> <span class="term">Misc.cameraY</span> - Gets or sets the current y position of the bottom-left corner of the camera.</li><br>
                <li><span class="boolean"></span> <span class="term">Misc.FullScreen</span> - Gets or sets whether the user is in fullscreen mode.</li><br>
                <li>
                    <span class="boolean"></span> <span class="term">Misc.ResizeWindow(<span class="number"></span> width, <span class="number"></span> height)</span> - Resizes CYF's window to the given width and height, in pixels. The parameters <span class="term">width</span> and <span class="term">height</span> must both be positive, and the function will return <span class="term">true</span> if the window was successfully resized, false otherwise. The window will not be resized if the requested width or height are bigger than the player's screen's respective width or height.
                    <br><br>
                    It also works in fullscreen; this function will make sure the given area will be displayed on screen at all times by adding black borders if needed.
                    <br><br>
                    <font color="red">* NOTE: Only allowed during battles.</font>
                </li><br>
                <li>
                    <span class="number"></span> <span class="term">Misc.WindowWidth</span> - Returns the width of the game window when running in windowed mode (even in fullscreen).
                    <br><br>
                    If set, it will set the width of CYF's window in pixels. CYF's default width is 640 pixels. Will do nothing if the player's screen's width is lower than the requested width.
                    <br><br>
                    <font color="red">* NOTE: Only allowed during battles.</font>
                </li><br>
                <li>
                    <span class="number"></span> <span class="term">Misc.WindowHeight</span> - Returns the height of the game window when running in windowed mode (even in fullscreen).
                    <br><br>
                    If set, it will set the height of CYF's window in pixels. CYF's default height is 480 pixels. Will do nothing if the player's screen's height is lower than the requested height.
                    <br><br>
                    <font color="red">* NOTE: Only allowed during battles.</font>
                </li><br>
                <li><span class="number"></span> <span class="term">Misc.ScreenWidth</span> (read-only) - Returns the width of the user's screen in windowed mode, or the number of displayed pixel columns when in fullscreen.</li><br>
                <li><span class="number"></span> <span class="term">Misc.ScreenHeight</span> (read-only) - Returns the height of the user's screen in windowed mode, or the number of displayed pixel rows when in fullscreen.</li><br>
                <li><span class="number"></span> <span class="term">Misc.MonitorWidth</span> (read-only) - Returns the width of the user's monitor, regardless of the user's settings or if <span class="term">Misc.SetWideFullscreen</span> has been used.</li><br>
                <li><span class="number"></span> <span class="term">Misc.MonitorHeight</span> (read-only) - Returns the height of the user's monitor, regardless of the user's settings or if <span class="term">Misc.SetWideFullscreen</span> has been used.</li><br>
                <li>
                    <span class="term">Misc.SetWideFullscreen(<span class="boolean"></span> wide)</span> - If the user is playing with an aspect ratio wider than 4:3, this function will expand the view in fullscreen to show the space to the left and right of the 640x480 screen space.
                    <br><br>
                    It will only take effect when in fullscreen, and will automatically resize the view if already in fullscreen.<br>
                    If the user's aspect ratio is 4:3 or thinner, nothing will change.<br>
                    Note that object positions, such as projectiles and sprites, will remain the same.
                    <br><br>
                    <font color="red">* NOTE: Only allowed during battles.</font>
                    <br><br><br>
                    You can use this code to determine how much space you have available on either side (still using the relative position system in which the screen is always assumed to be 640x480):
                    <br><br>
                    <div class="code-container">
   <pre class="brush: lua;">local displayedWidth = Misc.MonitorHeight / 0.75
local scale = 640 / displayedWidth
local widthOnEachSide = math.max(scale * (Misc.MonitorWidth - displayedWidth) / 2, 0)

CreateProjectileAbs("bullet", 0 - widthOnEachSide, 240) -- creates a bullet at the absolute left side of the screen when in wide fullscreen</pre>
            </div>
                    Here, if <span class="term">widthOnEachSide</span> is 0, the user is using a resolution that is 4:3 or thinner. Be sure to check if this number is greater than 0 before doing operations that require fullscreen!
                    <br><br>
                </li><br>
                <li><span class="term">Misc.DestroyWindow()</span> - Closes the window instantly.</li><br>
			</ul>
			<hr>
			<ul>
				<li><span class="number"></span> <span class="term">Misc.debuggerX</span> - Change the debugger's x position relative to the camera's position.</li><br>
				<li><span class="number"></span> <span class="term">Misc.debuggerY</span> - Change the debugger's y position relative to the camera's position.</li><br>
				<li><span class="number"></span> <span class="term">Misc.debuggerAbsX</span> - Change the debugger's x position relative to the encounter's bottom-left corner, or the map's bottom-left corner if used in the overworld.</li><br>
				<li><span class="number"></span> <span class="term">Misc.debuggerAbsY</span> - Change the debugger's y position relative to the encounter's bottom-left corner, or the map's bottom-left corner if used in the overworld.</li><br>
				<li><span class="term">Misc.MoveDebugger(<span class="number"></span> x, <span class="number"></span> y)</span> - Move the debugger relative to its current position.</li><br>
				<li><span class="term">Misc.MoveDebuggerTo(<span class="number"></span> x, <span class="number"></span> y)</span> - Move the debugger relative to the camera's current position.</li><br>
				<li><span class="term">Misc.MoveDebuggerToAbs(<span class="number"></span> x, <span class="number"></span> y)</span> - Move the debugger relative to the encounter's bottom-left corner, or the map's bottom-left corner if used in the overworld.</li><br>
				<li><span class="boolean"></span> <span class="term">Misc.isDebuggerAttachedToCamera</span> - Whether or not the camera should move the debugger along with it when it moves. True by default.</li><br>
				<li>Additional notes on the debugger:
					<ul>
						<li>The debugger's pivot point is its top-right corner.</li>
						<li>Its default absolute position is (620, 480).</li>
                        <li>Its width is 320 and its height 140.</li>
                        <li>If <span class="term">Misc.isDebuggerAttachedToCamera</span> is true when the window is resized, the debugger will stick to the top right corner of the screen.</li>
					</ul>
				</li>
            </ul>
            <hr>
            <span style="color:#aa0000;font-size:18px;">THE FOLLOWING VARIABLES AND FUNCTIONS ARE <u>WINDOWS ONLY</u>.</span><br>
            Don't forget to check if the user is playing with a Windows OS by using the variable <span class="term">windows</span>!<br><br>
            <ul>
                <li><span class="string"></span> <span class="term">Misc.WindowName</span> - Gets or sets the name of the window.</li><br>
                <li><span class="number"></span> <span class="term">Misc.WindowX</span> - Gets or sets the X position of the bottom left corner of the window.</li><br>
                <li><span class="number"></span> <span class="term">Misc.WindowY</span> - Gets or sets the Y position of the bottom left corner of the window.</li><br>
                <li><span class="term">Misc.MoveWindow(<span class="number"></span> X, <span class="number"></span>  Y)</span> - Moves the window X pixels horizontally and Y pixels vertically.</li><br>
                <li><span class="term">Misc.MoveWindowTo(<span class="number"></span> X, <span class="number"></span> Y)</span> - Moves the bottom left corner of the window to the given coordinates.
                </li><br>
            </ul>
            <hr>
            <h3>File Functions</h3>
            <br>
            <br><span class="function"><span class="boolean"></span> Misc.FileExists(<span class="string"></span> path)</span>
            Use this function to check if a file exists.
            <br><br>
            <ul>
                <li><span class="term">path</span>: Path to the file to open, relative to your Mod folder.<br>
                    Can enter subfolders such as <span class="term">Lua</span>.</li><br>
            </ul>
            Use this before <span class="term">Misc.OpenFile</span> if you plan to read from a file.
            <br><br>
            <br><span class="function"><span class="luatable"><span class="string"></span></span> Misc.ListDir(<span class="string"></span> path, <span class="boolean"></span> getFolders = false)</span>
            This function returns a list of either files or folders.
            <br><br>
            <ul>
                <li><span class="term">path</span>: Path to the file to open, relative to your Mod folder.<br>
                    Can enter subfolders such as <span class="term">Lua</span>.</li><br>
                <li><span class="term">getFolders</span>: If true, this function will return the names of all <b>Folders</b> in <span class="term">path</span>.<br>
                    Otherwise, this function will return the names of all <b>Files</b> in <span class="term">path</span>.</li>
            </ul>
            <br><br>
            <br><span class="function"><span class="boolean"></span> Misc.DirExists(<span class="string"></span> path)</span>
            Use this function to check if a folder exists.
            <br><br>
            <ul>
                <li><span class="term">path</span>: Path to the file to open, relative to your Mod folder.<br>
                    Can enter subfolders such as <span class="term">Lua</span>.</li><br>
            </ul>
            <br><span class="function"><span class="boolean"></span> Misc.CreateDir(<span class="string"></span> path)</span>
            Attempts to create a folder with the path <span class="term">path</span> relative to your Mod folder.
            <br><br>
            Returns <span class="term">true</span> if the operation was successful, <span class="term">false</span> otherwise.
            <br><br>
            <br><span class="function"><span class="boolean"></span> Misc.MoveDir(<span class="string"></span> path, <span class="string"></span> newPath)</span>
            Attempts to move a folder with the path <span class="term">path</span> relative to your Mod folder to a new location <span class="term">newPath</span>
            also relative to your mod folder.
            <br><br>
            Returns <span class="term">true</span> if the operation was successful, <span class="term">false</span> otherwise.
            <br><br>
            <br><span class="function"><span class="boolean"></span> Misc.RemoveDir(<span class="string"></span> path, <span class="boolean"></span> force = false)</span>
            Attempts to delete a folder with the path <span class="term">path</span> relative to your Mod folder.
            <br><br>
            <ul>
                <li><span class="term">force</span>: If true, this function will forcefully remove a folder. Otherwise, a folder will only be removed if it is empty.</li>
            </ul>
            Returns <span class="term">true</span> if the operation was successful, <span class="term">false</span> otherwise.
            <br><br>
            <br><span class="function">Misc.OpenFile(<span class="string"></span> path, <span class="string"></span> mode = "rw") returns <span class="userdata">File</span></span>
            This function opens a file <u>in CYF's Mods folder ONLY</u> for writing and anywhere for reading.
            <br><br>
            <ul>
                <li><span class="term">path</span>: Path to the file to open, relative to your Mod folder.<br>
                    Can enter subfolders such as <span class="term">Lua</span>.</li><br>
                <li>
                    <span class="term">mode</span>: Determines how the file should be opened:
                    <ul>
                        <li><span class="term">r</span>: The file can only be <u>read</u> from.</li><br>
                        <li><span class="term">w</span>: The file can only be <u>written</u> to.</li><br>
                        <li><span class="term">rw</span>: The file can be read from <u>AND</u> written to.</li><br>
                    </ul>
                    Files can be <u>created</u> through use of <span class="term">File.Write</span> (see below).
                </li>
            </ul>
            <br><br>
            This function returns a <span class="userdata">File</span> object representing the file:
            <br><br>
            <br><span class="function"> The File object [E/M/W]</span>
            <br><br>
            <ul>
                <span class="function ref" style="display: inline;">All modes</span>
                <br><br>
                <li><span class="string"></span> <span class="term">File.openMode</span> (read-only):
                    Returns the file mode being used by this File object.<br>
                    This is what you entered for <span class="term">mode</span> in <span class="term">Misc.OpenFile</span>.</li><br>
                <li><span class="number"></span> <span class="term">File.lineCount</span> (read-only):
                    The number of lines in the file.</li><br>
                <li><span class="string"></span> <span class="term">File.filePath</span> (read-only):
                    The full file path to the opened file.</li><br>
                <li><span class="term">File.Move(<span class="string"></span> new_path)</span>:
                    Moves the opened file to the path <span class="term">new_path</span>.<br>
                    Can be used to rename a file.</li><br>
                <li><span class="term">File.Copy(<span class="string"></span> new_path, <span class="boolean"></span> overwrite = false)</span>:
                    Copies the opened file to the path <span class="term">new_path</span>.<br>
                    If <span class="term">overwrite</span> is true, a file at the target path that already exists will be replaced with the opened file.</li><br>
                <hr><br>
                <span class="function ref" style="display: inline;">"r"</span>
                <br><br>
                <li><span class="string"></span> <span class="term">File.ReadLine(<span class="number"></span> line)</span>:
                    Returns the contents of line #<span class="term">line</span> as a string.</li><br>
                <li><span class="luatable"><span class="string"></span></span> <span class="term">File.ReadLines()</span>:
                    Returns every line in the file as a separate string, all within one table.<br>
                    Same as using <span class="term">File.ReadLine</span> on every line.</li><br>
                <li><span class="luatable"><span class="number"></span></span> <span class="term">File.ReadBytes()</span>:
                    Returns a table containing every individual byte in the file, start to finish, represented as a number.
                    <br><br>
                    Be prepared for a lag spike as soon as you use this function. Depending on the size of the file, the resulting table can be very large.</li>
                <br><br>
                <span class="function ref" style="display: inline;">"w"</span>
                <br><br>
                <li><span class="term">File.Write(<span class="string"></span> data, <span class="boolean"></span> append = true)</span>:
                    Writes the text in <span class="term">data</span> to the file. Supports <span class="term">\n</span>.
                    <br><br>
                    Creates the file if it doesn't exist.
                    <br><br>
                    If <span class="term">append</span> is true, the new text will be added to the end of the file (without a new line).<br>
                    Otherwise, the <u>entire file</u> will be replaced by <span class="term">data</span>.</li><br>
                <li><span class="term">File.ReplaceLine(<span class="number"></span> line, <span class="string"></span> data)</span>:
                    Sets the contents of line #<span class="term">line</span> in the file to <span class="term">data</span>.<br>
                    Supports <span class="term">\n</span>.</li><br>
                <li><span class="term">File.DeleteLine(<span class="number"></span> line)</span>:
                    Removes line #<span class="term">line</span> from the file.<br>
                    The line that came after it previously is now line #<span class="term">line</span>.</li><br>
                <li><span class="term">File.WriteBytes(<span class="luatable"><span class="number"></span></span> data)</span>:
                    Writes a series of bytes to a file. This will <u>replace</u> all contents of the file.</li><br>
                <li><span class="term">File.Delete()</span> <span class="ref">(w)</span>:
                    Deletes the file.<br>
                    If using <span class="term">"w"</span> or <span class="term">"rw"</span> mode, you can use <span class="term">File.Write</span> to create the file again.</li><br>
                <br>
            </ul>
        </div>

        <div class="tab-pane text-style" id="mercy">
            <h2 style="text-decoration: none; line-height:50px;">
                * YOU WON!<br>
                * You earned 0 EXP and 0 gold.<br>
                * also the nav menu is broken now
            </h2><br>
        </div>
    </div>
</div>

<div class="container">
    <div class="col-xs-3"><img class="centerbt black" alt="Undertale fake button" src="../img/fightbt_0.png" height="42">
    </div>
    <div class="col-xs-3"><img class="centerbt black" alt="Undertale fake button" src="../img/actbt_0.png" height="42">
    </div>
    <div class="col-xs-3"><img class="centerbt black" alt="Undertale fake button" src="../img/itembt_0.png" height="42">
    </div>
    <div class="col-xs-3"><a href="#mercy" data-toggle="tab"><img class="centerbt black" alt="Undertale fake button"
                                                                  src="../img/mercybt_0.png" height="42"></a>
    </div>
</div>
<br>
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script type="text/javascript" src="../js/show_hide_comments.js"></script>

<script type="text/javascript" src="../js/FontToggleButton.js"></script>
</body>
</html>
